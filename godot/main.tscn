[gd_scene load_steps=31 format=3 uid="uid://c4uw85k4jqmyf"]

[ext_resource type="Animation" uid="uid://brrftspysqxeq" path="res://gfx/gooseDive/gooseDive.anim" id="1_37aqj"]
[ext_resource type="Shader" uid="uid://b88uqnyohcr48" path="res://main.tres" id="2_0k8r8"]
[ext_resource type="Texture2D" uid="uid://wqgqqujd2fav" path="res://gfx/gooseFly/goosefly1.tres" id="2_xxxa8"]
[ext_resource type="Texture2D" uid="uid://dtrv08xh7x7f3" path="res://gfx/gooseFly/goosefly2.tres" id="3_4t1u7"]
[ext_resource type="Texture2D" uid="uid://dtb6xrs05vc8j" path="res://gfx/gooseFly/goosefly3.tres" id="4_1eoc6"]
[ext_resource type="Texture2D" uid="uid://b16ic1nhf5fi8" path="res://gfx/gooseIdle/Goose_idle.bmp" id="5_3ejog"]
[ext_resource type="Texture2D" uid="uid://ctclsowxdmqd4" path="res://gfx/gooseRoll/gooseRoll1.tres" id="6_622py"]
[ext_resource type="Texture2D" uid="uid://hj4xggcoa2ku" path="res://gfx/gooseRoll/gooseRoll2.tres" id="7_qh44q"]
[ext_resource type="Texture2D" uid="uid://c833gfqvq3x0l" path="res://gfx/gooseRoll/gooseRoll3.tres" id="8_bhh6b"]
[ext_resource type="Texture2D" uid="uid://b5aowlt1p3klc" path="res://gfx/gooseRoll/gooseRoll4.tres" id="9_7a7an"]
[ext_resource type="Texture2D" uid="uid://cu62cjh3roi6a" path="res://gfx/Goose_canon_spritesheet.png" id="12_0j71a"]
[ext_resource type="PackedScene" uid="uid://sx2wmc23ngv4" path="res://tile.tscn" id="12_t344k"]
[ext_resource type="Texture2D" uid="uid://yaow6qi6ead7" path="res://gfx/shootText/Goose_123shoot.png" id="13_vdjge"]

[sub_resource type="Animation" id="Animation_8xsvh"]
resource_name = "new_animation"
length = 10.0
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("3:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 1),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [0, 48, 5]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("2:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(2),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [11]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("1:frame")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(3),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [17]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("s:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(4),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [23]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("h:frame")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(4.1),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [29]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("o:frame")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(4.2),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [35]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("o2:frame")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(4.3),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [35]
}
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("t:frame")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(4.4),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [41]
}
tracks/8/type = "value"
tracks/8/imported = false
tracks/8/enabled = true
tracks/8/path = NodePath("excl:frame")
tracks/8/interp = 1
tracks/8/loop_wrap = true
tracks/8/keys = {
"times": PackedFloat32Array(4.5),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [47]
}

[sub_resource type="Animation" id="Animation_5pqs7"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("3:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [5]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("2:frame")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [11]
}
tracks/2/type = "value"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("1:frame")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [17]
}
tracks/3/type = "value"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("s:frame")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [26]
}
tracks/4/type = "value"
tracks/4/imported = false
tracks/4/enabled = true
tracks/4/path = NodePath("h:frame")
tracks/4/interp = 1
tracks/4/loop_wrap = true
tracks/4/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [29]
}
tracks/5/type = "value"
tracks/5/imported = false
tracks/5/enabled = true
tracks/5/path = NodePath("o:frame")
tracks/5/interp = 1
tracks/5/loop_wrap = true
tracks/5/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [35]
}
tracks/6/type = "value"
tracks/6/imported = false
tracks/6/enabled = true
tracks/6/path = NodePath("o2:frame")
tracks/6/interp = 1
tracks/6/loop_wrap = true
tracks/6/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [35]
}
tracks/7/type = "value"
tracks/7/imported = false
tracks/7/enabled = true
tracks/7/path = NodePath("t:frame")
tracks/7/interp = 1
tracks/7/loop_wrap = true
tracks/7/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [41]
}
tracks/8/type = "value"
tracks/8/imported = false
tracks/8/enabled = true
tracks/8/path = NodePath("excl:frame")
tracks/8/interp = 1
tracks/8/loop_wrap = true
tracks/8/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [47]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_nysdl"]
_data = {
"RESET": SubResource("Animation_5pqs7"),
"new_animation": SubResource("Animation_8xsvh")
}

[sub_resource type="GDScript" id="GDScript_xo3ya"]
script/source = "extends Camera2D

@export var Target: Node2D
@export var ZoomCurve: Curve
@export var ZoomDistanceMinMax: Vector2
@export var ZoomMinMax: Vector2
@export var ZoomXOffset: float = 0

@export var groundOffset: float
var posOffset

func _ready():
	posOffset = global_position

func _process(delta):
	set_y(Target.global_position.y)

func set_y(y: float):
	var half_y = (y-groundOffset) * 0.5
	zoom = Vector2.ONE * lerp_v2(-half_y, ZoomDistanceMinMax, ZoomMinMax, ZoomCurve)
	global_position = Vector2(ZoomXOffset * clampf(ZoomMinMax.x-zoom.x, 0,1), half_y) + posOffset
	#print(\"y: \", half_y, \", zoom: \", zoom)

func lerp_v2(current: float, distanceMinMax: Vector2, amountMinMax: Vector2, LerpCurve: Curve):
	var l = (current-distanceMinMax.x)/(distanceMinMax.y-distanceMinMax.x)
	return lerpf(amountMinMax.x, amountMinMax.y, clampf(LerpCurve.sample_baked(l),0,1))
"

[sub_resource type="Curve" id="Curve_524lu"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="Animation" id="Animation_24ch3"]
resource_name = "gooseFly"
length = 0.9
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GooseDive1:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.3, 0.6),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 1,
"values": [ExtResource("2_xxxa8"), ExtResource("3_4t1u7"), ExtResource("4_1eoc6")]
}

[sub_resource type="Animation" id="Animation_hhwca"]
resource_name = "idle"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GooseDive1:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [ExtResource("5_3ejog")]
}

[sub_resource type="Animation" id="Animation_byl6r"]
resource_name = "roll"
length = 0.4
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("GooseDive1:texture")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.1, 0.2, 0.3),
"transitions": PackedFloat32Array(1, 1, 1, 1),
"update": 1,
"values": [ExtResource("6_622py"), ExtResource("7_qh44q"), ExtResource("8_bhh6b"), ExtResource("9_7a7an")]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_d27tr"]
_data = {
"gooseDive": ExtResource("1_37aqj"),
"gooseFly": SubResource("Animation_24ch3"),
"idle": SubResource("Animation_hhwca"),
"roll": SubResource("Animation_byl6r")
}

[sub_resource type="ShaderMaterial" id="ShaderMaterial_tfvkg"]
shader = ExtResource("2_0k8r8")

[sub_resource type="CircleShape2D" id="CircleShape2D_8y3ff"]
radius = 91.9837

[sub_resource type="GDScript" id="GDScript_w8t71"]
script/source = "extends Node2D

@export var speed: float = 99

func set_x_vel(x_vel: float):
	speed = x_vel

func _process(delta):
	position += Vector2.LEFT * (delta * speed)
"

[sub_resource type="GDScript" id="GDScript_ouwri"]
script/source = "extends Node2D

@export var start_tile: Sprite2D

@export var tiling: int = 1
@export var tiling_offset: int = 0

#
#func _ready():
	#var width = start_tile.get_rect().size.x * scale.x
	#start_tile.global_position.x = 0 #width * tiling_offset
	#start_tile.get_script().tiling = tiling
	#for x in range(tiling):
		#var copy = start_tile.new()
		#var script = copy.get_script()
		#script.tiling = tiling
		#script.tiling_offset = x + 1
		#add_child(copy)
	##print(width)
	#pass
	
#
#func _process(delta):
	#var width = start_tile.get_rect().size.x * scale.x
	#var halfWidth = width * 0.5
	#var x = global_position.x
	#var left = x - halfWidth
	#var right = x + halfWidth
	#
	#if right < 0 :
		#global_position.x += width * tiling
		#print(\"moved\")

"

[sub_resource type="GDScript" id="GDScript_jmw4m"]
script/source = "extends Area2D


func hit(asdf):
	print(\"hit\")
"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_7wu5l"]
shader = ExtResource("2_0k8r8")

[sub_resource type="CircleShape2D" id="CircleShape2D_sjmup"]
radius = 112.0

[sub_resource type="GDScript" id="GDScript_3m4kv"]
script/source = "extends Label
#refference so we can grab world x position
@export var ground: Node2D;
#Variable that will store worlds x position
var distanceTraveled;
#global position grabs the middle of world so i need to offset it so that the position starts at 0
var startOffset = 877;
var highscore;

var distanceTraveledText;
var highscoreText;

# Called when the node enters the scene tree for the first time.
func _ready():
	highscore = 0;
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	
	
	#makes distanceTraveled into grounds x position
	distanceTraveled = -ground.global_position.x + startOffset;
	
	if distanceTraveled > highscore:
		highscore = distanceTraveled;
	
	#%.f tells the string that distanceTraveled is a float and the . makes it so the decimal points are removed
	#text = \"Current distance %.f meter's\" % distanceTraveled;
	text = \"Current distance %.f\" % distanceTraveled + \"\\nHighscore %.f\" % highscore;
	pass
"

[node name="Node2D" type="Node2D"]

[node name="ShootText" type="Node2D" parent="."]

[node name="3" type="Sprite2D" parent="ShootText"]
texture_filter = 1
position = Vector2(360, 128)
texture = ExtResource("13_vdjge")
hframes = 7
vframes = 7
frame = 5

[node name="2" type="Sprite2D" parent="ShootText"]
texture_filter = 1
position = Vector2(408, 128)
texture = ExtResource("13_vdjge")
hframes = 7
vframes = 7
frame = 11

[node name="1" type="Sprite2D" parent="ShootText"]
texture_filter = 1
position = Vector2(464, 128)
texture = ExtResource("13_vdjge")
hframes = 7
vframes = 7
frame = 17

[node name="s" type="Sprite2D" parent="ShootText"]
texture_filter = 1
position = Vector2(320, 184)
texture = ExtResource("13_vdjge")
hframes = 7
vframes = 7
frame = 26

[node name="h" type="Sprite2D" parent="ShootText"]
texture_filter = 1
position = Vector2(360, 192)
texture = ExtResource("13_vdjge")
hframes = 7
vframes = 7
frame = 29

[node name="o" type="Sprite2D" parent="ShootText"]
texture_filter = 1
position = Vector2(408, 184)
texture = ExtResource("13_vdjge")
hframes = 7
vframes = 7
frame = 35

[node name="o2" type="Sprite2D" parent="ShootText"]
texture_filter = 1
position = Vector2(448, 200)
texture = ExtResource("13_vdjge")
hframes = 7
vframes = 7
frame = 35

[node name="t" type="Sprite2D" parent="ShootText"]
texture_filter = 1
position = Vector2(480, 192)
texture = ExtResource("13_vdjge")
hframes = 7
vframes = 7
frame = 41

[node name="excl" type="Sprite2D" parent="ShootText"]
texture_filter = 1
position = Vector2(512, 184)
texture = ExtResource("13_vdjge")
hframes = 7
vframes = 7
frame = 47

[node name="AnimationPlayer" type="AnimationPlayer" parent="ShootText"]
libraries = {
"": SubResource("AnimationLibrary_nysdl")
}

[node name="Node2D" type="Node2D" parent="."]

[node name="Camera2D" type="Camera2D" parent="Node2D" node_paths=PackedStringArray("Target")]
position = Vector2(792, 328)
zoom = Vector2(0.725, 0.725)
script = SubResource("GDScript_xo3ya")
Target = NodePath("../Player")
ZoomCurve = SubResource("Curve_524lu")
ZoomDistanceMinMax = Vector2(0, 333)
ZoomMinMax = Vector2(0.7, 0.2)
ZoomXOffset = 999.0
groundOffset = 500.0

[node name="Player" type="Goose" parent="Node2D"]
ground_y = 500.0
damping = Vector2(666, 99)
shoot_vel = Vector2(6666, 333)
position = Vector2(286, 363)

[node name="AnimationPlayer" type="AnimationPlayer" parent="Node2D/Player"]
libraries = {
"": SubResource("AnimationLibrary_d27tr")
}
autoplay = "roll"
speed_scale = 1.812

[node name="GooseDive1" type="Sprite2D" parent="Node2D/Player"]
texture_filter = 1
material = SubResource("ShaderMaterial_tfvkg")
position = Vector2(-1, -6)
texture = ExtResource("5_3ejog")

[node name="RigidBody2D" type="StaticBody2D" parent="Node2D/Player"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Node2D/Player/RigidBody2D"]
shape = SubResource("CircleShape2D_8y3ff")

[node name="World" type="Node2D" parent="Node2D"]
position = Vector2(877, 382)
script = SubResource("GDScript_w8t71")
speed = 0.0

[node name="GooseCanonSpritesheet" type="Sprite2D" parent="Node2D/World"]
texture_filter = 1
position = Vector2(-515, -166)
scale = Vector2(5.625, 5.625)
texture = ExtResource("12_0j71a")
hframes = 6
vframes = 6
frame = 16

[node name="Node2D" type="Node2D" parent="Node2D/World"]
script = SubResource("GDScript_ouwri")
tiling = 2

[node name="Tile" parent="Node2D/World/Node2D" instance=ExtResource("12_t344k")]

[node name="Area2D" type="Area2D" parent="Node2D/World/Node2D/Tile"]
position = Vector2(168.96, -55.2041)
scale = Vector2(0.32, 0.363185)
input_pickable = false
script = SubResource("GDScript_jmw4m")

[node name="Sitting Goose" type="Sprite2D" parent="Node2D/World/Node2D/Tile/Area2D"]
texture_filter = 1
material = SubResource("ShaderMaterial_7wu5l")
texture = ExtResource("5_3ejog")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Node2D/World/Node2D/Tile/Area2D"]
shape = SubResource("CircleShape2D_sjmup")

[node name="Tile2" parent="Node2D/World/Node2D" instance=ExtResource("12_t344k")]
tiling_offset = 1

[node name="Tile3" parent="Node2D/World/Node2D" instance=ExtResource("12_t344k")]
tiling_offset = 2

[node name="Tile4" parent="Node2D/World/Node2D" instance=ExtResource("12_t344k")]
tiling_offset = 3

[node name="Tile5" parent="Node2D/World/Node2D" instance=ExtResource("12_t344k")]
tiling_offset = 4

[node name="Tile6" parent="Node2D/World/Node2D" instance=ExtResource("12_t344k")]
tiling_offset = 5

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Label" type="Label" parent="CanvasLayer" node_paths=PackedStringArray("ground")]
offset_left = 932.0
offset_top = 9.0
offset_right = 1145.0
offset_bottom = 32.0
script = SubResource("GDScript_3m4kv")
ground = NodePath("../../Node2D/World")

[node name="Space to continue" type="Label" parent="CanvasLayer"]
visible = false
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
text = "Goose hit!
Press space to continue!"
horizontal_alignment = 1

[connection signal="x_vel_update" from="Node2D/Player" to="Node2D/World" method="set_x_vel"]
[connection signal="body_entered" from="Node2D/World/Node2D/Tile/Area2D" to="Node2D/World/Node2D/Tile/Area2D" method="hit"]
